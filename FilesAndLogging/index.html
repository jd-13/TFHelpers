<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>FilesAndLogging - TFHelpers</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "FilesAndLogging";
    var mkdocs_page_input_path = "FilesAndLogging.md";
    var mkdocs_page_url = "/FilesAndLogging/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> TFHelpers</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Modules</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../SKTFModels/">SKTFModels</a>
                </li>
                <li class="">
                    
    <a class="" href="../ScikitLearnWrapper/">Scikit-learn Wrapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../TrainingHelpers/">TrainingHelpers</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">FilesAndLogging</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#filesandlogging">FilesAndLogging</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#checkpointandrestorehelper">CheckpointAndRestoreHelper</a></li>
        
            <li><a class="toctree-l4" href="#filemanager">FileManager</a></li>
        
            <li><a class="toctree-l4" href="#tensorboardloghelper">TensorboardLogHelper</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../ModelManager/">ModelManager</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">TFHelpers</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Modules &raquo;</li>
        
      
    
    <li>FilesAndLogging</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="filesandlogging">FilesAndLogging</h1>
<p>Several classes which assist with managing model files and creating tensorboard logs. To see
examples of how these classes are used, refer to the <code>fit</code> method of <code>TFRegressor</code>.</p>
<h2 id="checkpointandrestorehelper">CheckpointAndRestoreHelper</h2>
<p>This class will create a tf.train.Saver(), either as new or by using <code>import_meta_graph</code>. It then
allows restoration of an existing graph and/or the saving of a new graph.</p>
<pre><code>__init__(self, modelRootPath: str, shouldRestore: bool, graph)
</code></pre>
<p>Construct this object shortly before your training loop. This creates a saver which if <code>shouldRestore</code> is set to <code>True</code> will attempt to import the meta graph from existing model files, else will create new files when <code>saveCheckpoint</code> is called.</p>
<p>The <code>modelRootPath</code> is the path which will be used to save or restore from model files, and should
be the complete path to the files including their prefix. For example, if your model files are
<code>models/model.ckpt.meta</code> and <code>models/model.ckpt.index</code>, you should provide <code>models/model</code>.</p>
<p>After constructing the object, you will be able to retrive tensors and operations from the graph as
normal using <code>get_tensor_by_name</code> and <code>get_operation_by_name</code>.</p>
<pre><code>restoreFromCheckpoint(self, sess) -&gt; int
</code></pre>
<p>Will restore the model from the latest existing checkpoint.</p>
<pre><code>saveCheckpoint(self, sess, epoch: int) -&gt; None
</code></pre>
<p>Saves the current state of the model and writes a file containing the <code>epoch</code> value.</p>
<h2 id="filemanager">FileManager</h2>
<p>Generates paths in which to save model files in a standardised and consistent way.</p>
<pre><code>__init__(self, modelName: str, restoreFrom: str)
</code></pre>
<p>Generates the path to be used to stores models in, using the current datetime if <code>restoreFrom</code> is
<code>None</code>, or using the string provided in <code>restoreFrom</code>. If restore from is provided, it must be of
the format <code>YYYYMMDD-HHMM</code>.</p>
<pre><code>getModelDir(self) -&gt; str
</code></pre>
<p>Returns the complete path to the directory which is to be used to store model files.</p>
<pre><code>getModelDirAndPrefix(self) -&gt; str
</code></pre>
<p>Returns the complete path to the directory which is to be used to store model files, plus the
"model" prefix for the files themselves.</p>
<h2 id="tensorboardloghelper">TensorboardLogHelper</h2>
<p>Will write tensorboard logs in the provided directory for all <code>tf.Summary</code> nodes in the graph (such
as <code>tf.summary.histogram</code>) and also provides the ability to create additional scalar summaries, such
as for training loss and validation loss.</p>
<p>If you are restoring your graph using <code>tf.train.import_meta_graph</code> then this must be constructed
after this has been done (and therefore after constructing <code>CheckpointAndRestoreHelper</code>), otherwise
<code>TensorboardLogHelper</code> will be unable to restore summaries.</p>
<p>Note that this class uses tensorflow's default naming for tensorboard event files, which relies on
using epoch time to make the file names unique. This means that if several of these objects are
created within the same second, the last one may overwrite all the others.</p>
<pre><code>__init__(self, logDir, graph, summaryNames: List[str], shouldRestore: bool)
</code></pre>
<p>Construct this object shortly before your training loop. This creates a <code>tf.summary.FileWriter</code> for
the given <code>logDir</code> and <code>graph</code>. If you'd like additional scalar summaries that can be manipluated
during the training loop, provide a list of their names in <code>summaryNames</code>. Set <code>shouldRestore</code> to
true if you are restoring from a previous run, and <code>TensorboardLogHelper</code> will recover existing
summaries from the previous graph.</p>
<pre><code>setIteration(self, iteration: int)
</code></pre>
<p>Call this to set the iteration counter manually. If you're restoring from an earlier model
run, you'll need to call this once to set it to the epoch that you're restoring from.</p>
<p>Starts from 0 (the first epoch would be iteration 0).</p>
<pre><code>writeSummary(self, sess, summaryValues: List[float]) -&gt; None
</code></pre>
<p>Writes all summaries in the graph.</p>
<p>If you provided anything other than an empty list to the constructor in <code>summaryNames</code>, you must
provide a list of the same length in <code>summaryValues</code>, containing the values you wish to be written
to the summaries. The values must be provided in the same order as in <code>summaryNames</code>.</p>
<pre><code>close(self) -&gt; None
</code></pre>
<p>Closes the <code>tf.summary.FileWriter</code>. This should be called only before the object will be destroyed.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ModelManager/" class="btn btn-neutral float-right" title="ModelManager">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../TrainingHelpers/" class="btn btn-neutral" title="TrainingHelpers"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../TrainingHelpers/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../ModelManager/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
